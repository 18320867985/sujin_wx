<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
		<meta name="Keywords" content="" />
		<meta name="Description" content="" />
		<title>基本信息</title>
		<link rel="stylesheet" type="text/css" href="Content/Home/cstfont/iconfont.css" />
		<link rel="stylesheet" href="Content/Home/all.css" />
	</head>

	<body>
		<!--头部-->
		<header class="mui-bar mui-bar-nav bg-white">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left text-base"></a>
			<h1 class="mui-title">基本信息</h1>
		</header>

		<!--主体内容-->

		<section class="baseinfo mui-content">
			<ul class=" mui-table-view ">
				<li class="head-img mui-table-view-cell   progress-box">
					<a class="mui-navigate-right mui-clearfix " href="#sheet " id="openSheet ">
						<span class="ttl mui-pull-left ">头像</span>
						<img class="head-img mui-pull-right " src="images/Home/头像.png " alt="头像图 " />
					</a>

					<!--图片上传-->
					<div class=" mui-clearfix">
						<input class="v-hide file-up-box " type="file" name="" id="fileUp1" value="" accept="image/*" />
						<!--进度条-->
						<div class="progress-all v-hide ">
							<div class="progress-now"></div>
							<div class="progress-num v-hide">0%</div>

						</div>

				</li>
				<li class="mui-table-view-cell ">
					<a class="mui-navigate-right ">

						<span class=" mui-pull-left ">企业名称</span>
						<span class="mui-pull-right xx-item" data-filed="name">明辉工业</span>
					</a>
				</li>
				<li class="mui-table-view-cell ">
					<a class="mui-navigate-right ">

						<span class="mui-pull-left ">联系人</span>
						<span class="mui-pull-right xx-item" data-filed="concat">刘小姐</span>
					</a>
				</li>
				<li class="mui-table-view-cell ">
					<a class="mui-navigate-right ">

						<span class="mui-pull-left ">联系电话</span>
						<span class="mui-pull-right xx-item" data-filed="phone">138***8888</span>
					</a>
				</li>
				<li class="mui-table-view-cell ">
					<a class="mui-navigate-right ">

						<span class="mui-pull-left ">电子邮件</span>
						<span class="mui-pull-right xx-item" data-filed="email">665123123@qq.com</span>
					</a>
				</li>

			</ul>

		</section>

		<!--修改框-->
		<aside class="baseinfo-alert">
			<article>
				<header class="mui-clearfix">
					<div class="mui-pull-left ">
						<span class="mui-icon mui-icon-arrowthinleft close "></span>
						<span class="back-ttl">更改企业名称</span>
					</div>
					<div class="mui-pull-right">
						<input class="btn" type="button" name="" id="" value="保存" />
					</div>
				</header>
				<section>

					<input class="txt-v" type="text" name="" id="" value="" />

				</section>

			</article>

		</aside>

		<script src="js/Home/all.js " type="text/javascript " charset="utf-8 "></script>

		<script>
			mui.init();

			// 文件上传
			$(function() {
	
				// 改性塑料 图片上传
				var fileupff = function(obj, fileId) {

					var img = $(obj).parents(".progress-box").find(".progress-all");
					img.show();

					var file = document.getElementById(fileId).files[0];
					h5File.upload({
						data: file, //选择的文件
						url: "", //上传网址
						outTime: 30000,
						el: $(obj), //当前element
						size: 300000000, //1m=1000000
						seccess: function(data) {
							img.hide();
							// 成功回调
							// 成功设置img的src
							var url = "images/Home/客服.png";
							$(obj).parents(".progress-box").find(".file-up").val(url);
							$(obj).parents(".progress-box").find(".head-img").attr("src", url)

						},
						error: function(data) {
							img.hide();

							// 错误回调
							// 发布删除下面代码... 
							var url = "images/Home/客服.png";
							$(obj).parents(".progress-box").find(".file-up").val(url);
							$(obj).parents(".progress-box").find(".head-img").attr("src", url)

						}

					}); //调用上传接口
				}

				//文件上传
				$(".head-img ").on("click", function() {
					$(this).parents(".progress-box").find(".file-up-box").click();
				});

				$(".file-up-box").change(function() {
					fileupff(this, this.id);
				});

			});
			
			//修改信息
			$(function() {
				
				// 修改信息api
				baseInfo.editor(function(){
					
					var p = $(this).parents(".baseinfo-alert");
					var v = $(".txt-v", p).val(); // 内容值
					var filed = $(".txt-v", p).attr("data-filed"); //字段名称
					
					// 非空验证
					if(v == "" || v === null) {
						alert("修改内容不能为空！");
						return;
					}

					// 服务端ajax todo...
					//$.post("", {}, function(data) {
						$(".xx-item").each(function(){
							if($(this).attr("data-filed")==filed){$(this).text(v);}
							});
							$(".baseinfo-alert").hide(); // 大框hide
						// $(".txt-v", p).val();
				//	});
					
				});
		
			})
		
		</script>

	</body>

</html>